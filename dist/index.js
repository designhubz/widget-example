/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./designhubz-widget/dist/index.js":
/*!*****************************************!*\
  !*** ./designhubz-widget/dist/index.js ***!
  \*****************************************/
/***/ ((module) => {

eval("(function webpackUniversalModuleDefinition(root, factory) {\n\tif(true)\n\t\tmodule.exports = factory();\n\telse { var i, a; }\n})(self, function() {\nreturn /******/ (function() { // webpackBootstrap\n/******/ \t\"use strict\";\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ \"../../packages/lib/package.json\":\n/*!***************************************!*\\\n  !*** ../../packages/lib/package.json ***!\n  \\***************************************/\n/***/ (function(module) {\n\nmodule.exports = JSON.parse(\"{\\\"name\\\":\\\"@designhubz-widget/lib\\\",\\\"version\\\":\\\"0.1.0\\\",\\\"description\\\":\\\"(Implementation) API to load Designhubz XR widgets\\\",\\\"main\\\":\\\"src/index.ts\\\",\\\"scripts\\\":{\\\"build\\\":\\\"tsc\\\"},\\\"author\\\":\\\"Designhubz\\\",\\\"license\\\":\\\"UNLICENSED\\\",\\\"devDependencies\\\":{\\\"@types/node\\\":\\\"latest\\\",\\\"typescript\\\":\\\"latest\\\"},\\\"dependencies\\\":{\\\"@designhubz-widget/api\\\":\\\"file:../api\\\",\\\"@designhubz-widget/data\\\":\\\"file:../data\\\",\\\"@designhubz-widget/data-source\\\":\\\"file:../data-source\\\",\\\"@designhubz-widget/utils\\\":\\\"file:../utils\\\"},\\\"files\\\":[\\\"dist/**/*\\\"]}\");\n\n/***/ }),\n\n/***/ \"../../packages/data-source/src/MockData.ts\":\n/*!**************************************************!*\\\n  !*** ../../packages/data-source/src/MockData.ts ***!\n  \\**************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __nested_webpack_require_1556__) {\n\n__nested_webpack_require_1556__.r(__webpack_exports__);\n/* harmony export */ __nested_webpack_require_1556__.d(__webpack_exports__, {\n/* harmony export */   \"MockData\": function() { return /* binding */ MockData; }\n/* harmony export */ });\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar PRODUCT_DATA = [];\r\nvar createProductData = function (workspaceKey, productKey) {\r\n    var pd = PRODUCT_DATA.filter(function (d) { return d.productKey === productKey; })[0];\r\n    if (pd === undefined) {\r\n        pd = {\r\n            workspaceKey: workspaceKey,\r\n            productKey: productKey,\r\n            productType: 'Eyewear',\r\n            properties: { colorCode: productKey, sizeCode: productKey, thumbnailURL: productKey },\r\n            variations: PRODUCT_DATA\r\n        };\r\n        PRODUCT_DATA.push(pd);\r\n    }\r\n    return pd;\r\n};\r\nvar SCENE_DATA = {\r\n    descriptorURL: 'descriptors/scene.json'\r\n};\r\nvar SKIN_DATA = {\r\n    descriptorURL: 'descriptors/skin.json'\r\n};\r\nvar responseTime = function () { return __awaiter(void 0, void 0, void 0, function () { return __generator(this, function (_a) {\r\n    switch (_a.label) {\r\n        case 0: return [4 /*yield*/, new Promise(function (r) { return setTimeout(r, 250); })];\r\n        case 1: return [2 /*return*/, _a.sent()];\r\n    }\r\n}); }); };\r\nvar MockData = /** @class */ (function () {\r\n    function MockData() {\r\n    }\r\n    MockData.prototype.GetSkinResponse = function (workspaceKey) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, responseTime()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/, {\r\n                                status: 'success',\r\n                                data: [{\r\n                                        publicFolderUrl: 'skins/',\r\n                                        workspaceId: workspaceKey,\r\n                                        skinData: SKIN_DATA\r\n                                    }]\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    MockData.prototype.GetSceneResponse = function (workspaceKey, productKey) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, responseTime()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/, {\r\n                                status: 'success',\r\n                                data: [{\r\n                                        referenceId: productKey,\r\n                                        workspaceId: workspaceKey,\r\n                                        name: \"Product(\" + productKey + \")\",\r\n                                        publicFolderUrl: \"https://\" + workspaceKey + \".com\",\r\n                                        sceneData: SCENE_DATA\r\n                                    }]\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    MockData.prototype.FetchProductResponse = function (workspaceKey, productKey) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, responseTime()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/, {\r\n                                status: 'success',\r\n                                data: [{\r\n                                        productData: createProductData(workspaceKey, productKey)\r\n                                    }]\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    MockData.prototype.FetchProductsResponse = function (workspaceKey, productKeys) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, responseTime()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/, {\r\n                                status: 'success',\r\n                                data: productKeys.map(function (key) {\r\n                                    return {\r\n                                        productData: createProductData(workspaceKey, key)\r\n                                    };\r\n                                })\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return MockData;\r\n}());\r\n\r\n\n\n/***/ }),\n\n/***/ \"../../packages/data-source/src/TempData.ts\":\n/*!**************************************************!*\\\n  !*** ../../packages/data-source/src/TempData.ts ***!\n  \\**************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __nested_webpack_require_9154__) {\n\n__nested_webpack_require_9154__.r(__webpack_exports__);\n/* harmony export */ __nested_webpack_require_9154__.d(__webpack_exports__, {\n/* harmony export */   \"TempData\": function() { return /* binding */ TempData; }\n/* harmony export */ });\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar fetchJSON = function (url) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var response;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0: return [4 /*yield*/, fetch(url, { method: 'GET' })];\r\n            case 1:\r\n                response = _a.sent();\r\n                if (response.ok)\r\n                    return [2 /*return*/, response.json()];\r\n                return [2 /*return*/];\r\n        }\r\n    });\r\n}); };\r\n// https://designhubz-viewer-data.s3-eu-west-1.amazonaws.com/user/workspace/eyewear/glass1/scene.json\r\nvar folder = {\r\n    w: function (root, workspaceKey) { return root + \"user/workspace/\" + workspaceKey + \"/\"; },\r\n    s: function (root, workspaceKey, productKey) { return folder.w(root, workspaceKey) + \"scene/\" + productKey + \"/\"; }\r\n};\r\nvar TempData = /** @class */ (function () {\r\n    function TempData(root) {\r\n        this.root = root;\r\n    }\r\n    TempData.prototype.Resolve = function (url) {\r\n        return this.root + url;\r\n    };\r\n    TempData.prototype.GetSkinResponse = function (workspaceKey) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var dirURL, data, response;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        dirURL = folder.w(this.root, workspaceKey);\r\n                        return [4 /*yield*/, fetchJSON(dirURL + 'skin.json')];\r\n                    case 1:\r\n                        data = _a.sent();\r\n                        if (data !== undefined)\r\n                            data.publicFolderUrl = dirURL;\r\n                        response = {\r\n                            status: data !== undefined ? 'success' : 'error',\r\n                            data: [data]\r\n                        };\r\n                        return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    TempData.prototype.GetSceneResponse = function (workspaceKey, productKey) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var dirURL, data, response;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        dirURL = folder.s(this.root, workspaceKey, productKey);\r\n                        return [4 /*yield*/, fetchJSON(dirURL + 'scene.json')];\r\n                    case 1:\r\n                        data = _a.sent();\r\n                        if (data !== undefined)\r\n                            data.publicFolderUrl = dirURL;\r\n                        response = {\r\n                            status: data !== undefined ? 'success' : 'error',\r\n                            data: [data]\r\n                        };\r\n                        return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    TempData.prototype.FetchProductResponse = function (workspaceKey, productKey, collectVariationDetails) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var sceneEntry, scene, data, productData, _a, response;\r\n            var _this = this;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0: return [4 /*yield*/, this.GetSceneResponse(workspaceKey, productKey)];\r\n                    case 1:\r\n                        sceneEntry = _b.sent();\r\n                        if (sceneEntry.status !== 'success' || sceneEntry.data[0] === undefined)\r\n                            throw new Error(\"Error FetchProductResponse(\" + workspaceKey + \", \" + productKey + \")\");\r\n                        scene = sceneEntry.data[0];\r\n                        data = {\r\n                            productData: scene.sceneData.productData\r\n                        };\r\n                        productData = data.productData;\r\n                        if (productData.variations === undefined)\r\n                            productData.variations = [];\r\n                        if (!collectVariationDetails) return [3 /*break*/, 3];\r\n                        if (!(productData.variations.length > 0 && typeof productData.variations[0] === 'string')) return [3 /*break*/, 3];\r\n                        _a = productData;\r\n                        return [4 /*yield*/, Promise.all(productData.variations.map(function (v) { return __awaiter(_this, void 0, void 0, function () {\r\n                                var vResponse;\r\n                                return __generator(this, function (_a) {\r\n                                    switch (_a.label) {\r\n                                        case 0: return [4 /*yield*/, this.FetchProductResponse(workspaceKey, v, false)];\r\n                                        case 1:\r\n                                            vResponse = _a.sent();\r\n                                            if (vResponse.status === 'success' && vResponse.data[0] !== undefined) {\r\n                                                return [2 /*return*/, vResponse.data[0]];\r\n                                            }\r\n                                            else {\r\n                                                return [2 /*return*/, v];\r\n                                            }\r\n                                            return [2 /*return*/];\r\n                                    }\r\n                                });\r\n                            }); }))];\r\n                    case 2:\r\n                        _a.variations = _b.sent();\r\n                        _b.label = 3;\r\n                    case 3:\r\n                        response = {\r\n                            status: data !== undefined ? 'success' : 'error',\r\n                            data: [data]\r\n                        };\r\n                        return [2 /*return*/, response];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    TempData.prototype.FetchProductsResponse = function (workspaceKey, productKeys, collectVariationDetails) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                throw 'FetchProductsResponse Not implemented';\r\n            });\r\n        });\r\n    };\r\n    return TempData;\r\n}());\r\n\r\n\n\n/***/ }),\n\n/***/ \"../../packages/data-source/src/ViewerData.ts\":\n/*!****************************************************!*\\\n  !*** ../../packages/data-source/src/ViewerData.ts ***!\n  \\****************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __nested_webpack_require_18504__) {\n\n__nested_webpack_require_18504__.r(__webpack_exports__);\n/* harmony export */ __nested_webpack_require_18504__.d(__webpack_exports__, {\n/* harmony export */   \"ViewerData\": function() { return /* binding */ ViewerData; }\n/* harmony export */ });\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar ViewerData = /** @class */ (function () {\r\n    function ViewerData() {\r\n    }\r\n    ViewerData.prototype.GetSkinResponse = function (workspaceKey) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                throw 'Not implemented';\r\n            });\r\n        });\r\n    };\r\n    ViewerData.prototype.GetSceneResponse = function (workspaceKey, productKey) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                throw 'Not implemented';\r\n            });\r\n        });\r\n    };\r\n    ViewerData.prototype.FetchProductResponse = function (workspaceKey, productKey, collectVariationDetails) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                throw 'Not implemented';\r\n            });\r\n        });\r\n    };\r\n    ViewerData.prototype.FetchProductsResponse = function (workspaceKey, productKeys, collectVariationDetails) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                throw 'Not implemented';\r\n            });\r\n        });\r\n    };\r\n    return ViewerData;\r\n}());\r\n\r\n\n\n/***/ }),\n\n/***/ \"../../packages/data-source/src/index.ts\":\n/*!***********************************************!*\\\n  !*** ../../packages/data-source/src/index.ts ***!\n  \\***********************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __nested_webpack_require_22837__) {\n\n__nested_webpack_require_22837__.r(__webpack_exports__);\n/* harmony export */ __nested_webpack_require_22837__.d(__webpack_exports__, {\n/* harmony export */   \"MockData\": function() { return /* reexport safe */ _MockData__WEBPACK_IMPORTED_MODULE_0__.MockData; },\n/* harmony export */   \"ViewerData\": function() { return /* reexport safe */ _ViewerData__WEBPACK_IMPORTED_MODULE_1__.ViewerData; },\n/* harmony export */   \"TempData\": function() { return /* reexport safe */ _TempData__WEBPACK_IMPORTED_MODULE_2__.TempData; }\n/* harmony export */ });\n/* harmony import */ var _MockData__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_22837__(/*! ./MockData */ \"../../packages/data-source/src/MockData.ts\");\n/* harmony import */ var _ViewerData__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_22837__(/*! ./ViewerData */ \"../../packages/data-source/src/ViewerData.ts\");\n/* harmony import */ var _TempData__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_22837__(/*! ./TempData */ \"../../packages/data-source/src/TempData.ts\");\n\r\n\r\n\r\n\n\n/***/ }),\n\n/***/ \"../../packages/data/src/DataSource.ts\":\n/*!*********************************************!*\\\n  !*** ../../packages/data/src/DataSource.ts ***!\n  \\*********************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __nested_webpack_require_24121__) {\n\n__nested_webpack_require_24121__.r(__webpack_exports__);\n\r\n\n\n/***/ }),\n\n/***/ \"../../packages/data/src/index.ts\":\n/*!****************************************!*\\\n  !*** ../../packages/data/src/index.ts ***!\n  \\****************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __nested_webpack_require_24445__) {\n\n__nested_webpack_require_24445__.r(__webpack_exports__);\n/* harmony export */ __nested_webpack_require_24445__.d(__webpack_exports__, {\n/* harmony export */   \"Data\": function() { return /* binding */ Data; }\n/* harmony export */ });\n/* harmony import */ var _DataSource__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_24445__(/*! ./DataSource */ \"../../packages/data/src/DataSource.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nconsole.log('@designhubz-widget/data');\r\n\r\nvar Data;\r\n(function (Data) {\r\n    Data.apps = {\r\n        viewer: '',\r\n        eyewear: '',\r\n        editor: ''\r\n    };\r\n    function GetScene(workspaceKey, productKey) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, Data.source.GetSceneResponse(workspaceKey, productKey)];\r\n                    case 1:\r\n                        response = _a.sent();\r\n                        if (response.status !== 'success' || typeof response.data[0] !== 'object')\r\n                            throw new Error(\"Error: GetScene(\" + workspaceKey + \": string, \" + productKey + \": string)\");\r\n                        return [2 /*return*/, {\r\n                                name: response.data[0].name,\r\n                                publicFolderUrl: response.data[0].publicFolderUrl,\r\n                                sceneData: response.data[0].sceneData\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    Data.GetScene = GetScene;\r\n    function GetSkin(workspaceKey) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, Data.source.GetSkinResponse(workspaceKey)];\r\n                    case 1:\r\n                        response = _a.sent();\r\n                        if (response.status !== 'success' || typeof response.data[0] !== 'object')\r\n                            throw new Error(\"Error: GetSkin(\" + workspaceKey + \": string)\");\r\n                        return [2 /*return*/, {\r\n                                publicFolderUrl: response.data[0].publicFolderUrl,\r\n                                skinData: response.data[0].skinData\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    Data.GetSkin = GetSkin;\r\n    function FetchProduct(workspaceKey, productKey) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, Data.source.FetchProductResponse(workspaceKey, productKey, true)];\r\n                    case 1:\r\n                        response = _a.sent();\r\n                        if (response.status !== 'success' || typeof response.data[0] !== 'object')\r\n                            throw new Error(\"Error: GetProductData(\" + workspaceKey + \": string, \" + productKey + \": string)\");\r\n                        return [2 /*return*/, {\r\n                                productData: response.data[0].productData\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    Data.FetchProduct = FetchProduct;\r\n    function FetchProducts(workspaceKey, productKeys) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var response, map;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, Data.source.FetchProductsResponse(workspaceKey, productKeys, true)];\r\n                    case 1:\r\n                        response = _a.sent();\r\n                        if (response.status !== 'success' || typeof response.data[0] !== 'object')\r\n                            throw new Error(\"Error: GetProductData(\" + workspaceKey + \": string, [\" + productKeys.join(',') + \"]: string[])\");\r\n                        map = {};\r\n                        response.data.forEach(function (item) { return map[item.productData.productKey] = item; });\r\n                        return [2 /*return*/, map];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    Data.FetchProducts = FetchProducts;\r\n})(Data || (Data = {}));\r\n\n\n/***/ }),\n\n/***/ \"../../packages/lib/src/_API.ts\":\n/*!**************************************!*\\\n  !*** ../../packages/lib/src/_API.ts ***!\n  \\**************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __nested_webpack_require_31608__) {\n\n__nested_webpack_require_31608__.r(__webpack_exports__);\n/* harmony export */ __nested_webpack_require_31608__.d(__webpack_exports__, {\n/* harmony export */   \"version\": function() { return /* binding */ version; },\n/* harmony export */   \"dev\": function() { return /* binding */ dev; },\n/* harmony export */   \"fetchProduct\": function() { return /* binding */ fetchProduct; },\n/* harmony export */   \"fetchProducts\": function() { return /* binding */ fetchProducts; }\n/* harmony export */ });\n/* harmony import */ var _designhubz_widget_data__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_31608__(/*! @designhubz-widget/data */ \"../../packages/data/src/index.ts\");\n/* harmony import */ var _products_Factory__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_31608__(/*! ./products/Factory */ \"../../packages/lib/src/products/Factory.ts\");\n/* harmony import */ var _Dev__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_31608__(/*! ./_Dev */ \"../../packages/lib/src/_Dev.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\n\r\n\r\n\r\nvar version = __nested_webpack_require_31608__(/*! ../package.json */ \"../../packages/lib/package.json\").version;\r\nvar dev = _Dev__WEBPACK_IMPORTED_MODULE_2__._dev;\r\nfunction fetchProduct(workspaceKey, productKey, props) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var product, productData;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    if (typeof workspaceKey !== 'string' || typeof productKey !== 'string')\r\n                        throw new RangeError(\"Invalid arguments: fetchProduct(\" + workspaceKey + \": string, \" + productKey + \": string)\");\r\n                    product = (0,_products_Factory__WEBPACK_IMPORTED_MODULE_1__.ProductFromCache)(workspaceKey, productKey);\r\n                    if (!(product === undefined)) return [3 /*break*/, 2];\r\n                    _Dev__WEBPACK_IMPORTED_MODULE_2__._dev.Log('#(bold,#f00)', 'fetching product:', '#()', \"(\" + workspaceKey + \", \" + productKey + \")\");\r\n                    return [4 /*yield*/, _designhubz_widget_data__WEBPACK_IMPORTED_MODULE_0__.Data.FetchProduct(workspaceKey, productKey)];\r\n                case 1:\r\n                    productData = (_a.sent()).productData;\r\n                    product = (0,_products_Factory__WEBPACK_IMPORTED_MODULE_1__.ProductFromData)(productData, props);\r\n                    return [3 /*break*/, 3];\r\n                case 2:\r\n                    _Dev__WEBPACK_IMPORTED_MODULE_2__._dev.Log('#(bold,#f88)', '(cache) fetching product:', '#()', \"(\" + workspaceKey + \" | \" + productKey + \")\");\r\n                    _a.label = 3;\r\n                case 3: return [2 /*return*/, product];\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction fetchProducts(workspaceKey, productKeys, props) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var result, stats, productsToFetch, productsMap_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    if (typeof workspaceKey !== 'string' || (productKeys instanceof Array) === false || productKeys.length === 0 || typeof productKeys[0] !== 'string')\r\n                        throw new RangeError(\"Invalid arguments: fetchProducts(\" + workspaceKey + \": string, \" + productKeys.join(', ') + \": string[])\");\r\n                    _Dev__WEBPACK_IMPORTED_MODULE_2__._dev.Log('#(bold,#000)', 'fetching products:', '#()', \"(\" + workspaceKey + \", [\" + productKeys.join(', ') + \"])\");\r\n                    result = {};\r\n                    stats = { cache: 0, fetch: 0, missing: productKeys.length };\r\n                    productsToFetch = [];\r\n                    productKeys.forEach(function (productKey) {\r\n                        var product = (0,_products_Factory__WEBPACK_IMPORTED_MODULE_1__.ProductFromCache)(workspaceKey, productKey);\r\n                        if (product === undefined) {\r\n                            productsToFetch.push(productKey);\r\n                        }\r\n                        else {\r\n                            stats.cache++;\r\n                            stats.missing--;\r\n                            result[productKey] = product;\r\n                        }\r\n                    });\r\n                    if (!(productsToFetch.length > 0)) return [3 /*break*/, 2];\r\n                    return [4 /*yield*/, _designhubz_widget_data__WEBPACK_IMPORTED_MODULE_0__.Data.FetchProducts(workspaceKey, productsToFetch)];\r\n                case 1:\r\n                    productsMap_1 = (_a.sent());\r\n                    productsToFetch.forEach(function (productKey) {\r\n                        var product = productsMap_1[productKey];\r\n                        if (product !== undefined) {\r\n                            stats.fetch++;\r\n                            stats.missing--;\r\n                            result[productKey] = (0,_products_Factory__WEBPACK_IMPORTED_MODULE_1__.ProductFromData)(product.productData, props);\r\n                        }\r\n                    });\r\n                    _a.label = 2;\r\n                case 2:\r\n                    _Dev__WEBPACK_IMPORTED_MODULE_2__._dev.Log('#(,#f88)', stats.cache + \" from cache\", ' | ', stats.fetch > 0 ? '#(bold,#f00)' : '#(bold)', stats.fetch + \" fetched\", ' | ', stats.missing > 0 ? '#(#fff,#f00)' : '#(bold)', stats.missing + \" missing\");\r\n                    return [2 /*return*/, result];\r\n            }\r\n        });\r\n    });\r\n}\r\n\n\n/***/ }),\n\n/***/ \"../../packages/lib/src/_Data.ts\":\n/*!***************************************!*\\\n  !*** ../../packages/lib/src/_Data.ts ***!\n  \\***************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __nested_webpack_require_39778__) {\n\n__nested_webpack_require_39778__.r(__webpack_exports__);\n/* harmony import */ var _designhubz_widget_data__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_39778__(/*! @designhubz-widget/data */ \"../../packages/data/src/index.ts\");\n/* harmony import */ var _designhubz_widget_data_source__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_39778__(/*! @designhubz-widget/data-source */ \"../../packages/data-source/src/index.ts\");\n\r\n\r\nvar searchParams = (new URL(location.href)).searchParams;\r\nvar local = Boolean(searchParams.get('local')) ? 'https://localhost' : false;\r\nvar s3 = 'https://designhubz-viewer-data.s3-eu-west-1.amazonaws.com/';\r\nvar localFlag = local ? '?local=1' : '';\r\n_designhubz_widget_data__WEBPACK_IMPORTED_MODULE_0__.Data.apps.viewer = (local ? local + ':2020/example/viewer.html' : s3 + 'apps/viewer/index.html') + localFlag;\r\n_designhubz_widget_data__WEBPACK_IMPORTED_MODULE_0__.Data.apps.editor = (local ? local + ':2020/example/editor.html' : s3 + 'apps/viewer/editor.html') + localFlag;\r\n_designhubz_widget_data__WEBPACK_IMPORTED_MODULE_0__.Data.apps.eyewear = (local ? local + ':3000/' : s3 + 'apps/eyewear/index.html') + localFlag;\r\n_designhubz_widget_data__WEBPACK_IMPORTED_MODULE_0__.Data.source = new _designhubz_widget_data_source__WEBPACK_IMPORTED_MODULE_1__.TempData(local ? local + ':2020/example/storage.ignore/' : s3);\r\n\n\n/***/ }),\n\n/***/ \"../../packages/lib/src/_Dev.ts\":\n/*!**************************************!*\\\n  !*** ../../packages/lib/src/_Dev.ts ***!\n  \\**************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __nested_webpack_require_41377__) {\n\n__nested_webpack_require_41377__.r(__webpack_exports__);\n/* harmony export */ __nested_webpack_require_41377__.d(__webpack_exports__, {\n/* harmony export */   \"DEV_DEBUG_URL_PARAM\": function() { return /* binding */ DEV_DEBUG_URL_PARAM; },\n/* harmony export */   \"_dev\": function() { return /* binding */ _dev; }\n/* harmony export */ });\n/* harmony import */ var _designhubz_widget_utils__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_41377__(/*! @designhubz-widget/utils */ \"../../packages/utils/src/index.ts\");\nvar __spreadArrays = (undefined && undefined.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\n/** enabled = ?designhubz_debug=bool */\r\nvar DEV_DEBUG_URL_PARAM = 'designhubz_debug';\r\nvar formatOptions = ['font-weight', 'color', 'background'];\r\nvar _dev = new (/** @class */ (function () {\r\n    function _Dev() {\r\n        this.debug = false;\r\n    }\r\n    _Dev.prototype.Log = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (this.debug) {\r\n            var formatting = [];\r\n            var _loop_1 = function (i) {\r\n                var arg = args[i];\r\n                var text = args[i + 1];\r\n                if (typeof arg === 'string' && typeof text === 'string' && arg.slice(0, 2) === '#(') {\r\n                    var optionsArgs_1 = arg.slice(2, arg.length - 1).split(',');\r\n                    var format = formatOptions.map(function (o, i) {\r\n                        return typeof optionsArgs_1[i] === 'string' && optionsArgs_1[i].length > 0\r\n                            ? o + \":\" + optionsArgs_1[i] + \";\"\r\n                            : '';\r\n                    }).join(' ');\r\n                    args.splice(i, 1);\r\n                    args[i] = \"%c \" + text + \" \";\r\n                    formatting.push(format);\r\n                }\r\n            };\r\n            for (var i = 0; i < args.length - 1; i++) {\r\n                _loop_1(i);\r\n            }\r\n            if (formatting.length > 0)\r\n                console.log.apply(console, __spreadArrays([args.map(function (arg) { return arg.toString(); }).join('')], formatting));\r\n            else\r\n                console.log.apply(console, args);\r\n        }\r\n    };\r\n    _Dev.prototype.CreateError = function (name, message) {\r\n        this.Log(\"Created ERROR '\" + name + \"': '\" + message + \"'\");\r\n        var error = new Error(message);\r\n        error.name = name;\r\n        return error;\r\n    };\r\n    return _Dev;\r\n}()));\r\nvar bool = function (p) { return p === '1' || p === 'true'; };\r\nif (bool((0,_designhubz_widget_utils__WEBPACK_IMPORTED_MODULE_0__.GetUrlParam)(DEV_DEBUG_URL_PARAM)))\r\n    _dev.debug = true;\r\n\n\n/***/ }),\n\n/***/ \"../../packages/lib/src/index.ts\":\n/*!***************************************!*\\\n  !*** ../../packages/lib/src/index.ts ***!\n  \\***************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __nested_webpack_require_44562__) {\n\n__nested_webpack_require_44562__.r(__webpack_exports__);\n/* harmony export */ __nested_webpack_require_44562__.d(__webpack_exports__, {\n/* harmony export */   \"dev\": function() { return /* reexport safe */ _API__WEBPACK_IMPORTED_MODULE_1__.dev; },\n/* harmony export */   \"fetchProduct\": function() { return /* reexport safe */ _API__WEBPACK_IMPORTED_MODULE_1__.fetchProduct; },\n/* harmony export */   \"fetchProducts\": function() { return /* reexport safe */ _API__WEBPACK_IMPORTED_MODULE_1__.fetchProducts; },\n/* harmony export */   \"version\": function() { return /* reexport safe */ _API__WEBPACK_IMPORTED_MODULE_1__.version; },\n/* harmony export */   \"Internal\": function() { return /* reexport safe */ _internal__WEBPACK_IMPORTED_MODULE_2__.Internal; }\n/* harmony export */ });\n/* harmony import */ var _Data__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_44562__(/*! ./_Data */ \"../../packages/lib/src/_Data.ts\");\n/* harmony import */ var _API__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_44562__(/*! ./_API */ \"../../packages/lib/src/_API.ts\");\n/* harmony import */ var _internal__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_44562__(/*! ./internal */ \"../../packages/lib/src/internal/index.ts\");\nconsole.log('@designhubz-widget/lib');\r\n\r\n\r\n\r\n\n\n/***/ }),\n\n/***/ \"../../packages/lib/src/internal/_EditorWidget.ts\":\n/*!********************************************************!*\\\n  !*** ../../packages/lib/src/internal/_EditorWidget.ts ***!\n  \\********************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __nested_webpack_require_46117__) {\n\n__nested_webpack_require_46117__.r(__webpack_exports__);\n/* harmony export */ __nested_webpack_require_46117__.d(__webpack_exports__, {\n/* harmony export */   \"_EditorWidget\": function() { return /* binding */ _EditorWidget; }\n/* harmony export */ });\n/* harmony import */ var _designhubz_widget_data__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_46117__(/*! @designhubz-widget/data */ \"../../packages/data/src/index.ts\");\n/* harmony import */ var _widgets_3DWidget__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_46117__(/*! ../widgets/_3DWidget */ \"../../packages/lib/src/widgets/_3DWidget.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\n\r\n\r\nvar _EditorWidget = /** @class */ (function (_super) {\r\n    __extends(_EditorWidget, _super);\r\n    function _EditorWidget(defaultVariation, domElement) {\r\n        var _this = _super.call(this, defaultVariation, domElement, _designhubz_widget_data__WEBPACK_IMPORTED_MODULE_0__.Data.apps.editor + \"?workspaceId=\" + defaultVariation.workspaceKey + \"&referenceId=\" + defaultVariation.productKey) || this;\r\n        _this._editor = true;\r\n        return _this;\r\n    }\r\n    _EditorWidget.prototype.debug = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var query;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.QueryAsync({\r\n                            event: \"Debug\" /* Debug */,\r\n                            value: null\r\n                        })];\r\n                    case 1:\r\n                        query = _a.sent();\r\n                        return [2 /*return*/, Boolean(query.value)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    _EditorWidget.prototype.save = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var query;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.QueryAsync({\r\n                            event: \"Save\" /* Save */,\r\n                            value: null\r\n                        })];\r\n                    case 1:\r\n                        query = _a.sent();\r\n                        return [2 /*return*/, Boolean(query.value)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return _EditorWidget;\r\n}(_widgets_3DWidget__WEBPACK_IMPORTED_MODULE_1__._3DWidget));\r\n\r\n\n\n/***/ }),\n\n/***/ \"../../packages/lib/src/internal/index.ts\":\n/*!************************************************!*\\\n  !*** ../../packages/lib/src/internal/index.ts ***!\n  \\************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __nested_webpack_require_51955__) {\n\n__nested_webpack_require_51955__.r(__webpack_exports__);\n/* harmony export */ __nested_webpack_require_51955__.d(__webpack_exports__, {\n/* harmony export */   \"Internal\": function() { return /* binding */ Internal; }\n/* harmony export */ });\n/* harmony import */ var _EditorWidget__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_51955__(/*! ./_EditorWidget */ \"../../packages/lib/src/internal/_EditorWidget.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\n\r\nvar Internal;\r\n(function (Internal) {\r\n    Internal.EditorWidget = _EditorWidget__WEBPACK_IMPORTED_MODULE_0__._EditorWidget;\r\n    function createEditorWidget(defaultVariation, domElement) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var widget;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        widget = new Internal.EditorWidget(defaultVariation, domElement);\r\n                        return [4 /*yield*/, widget.waitForInit];\r\n                    case 1: return [2 /*return*/, _a.sent()];\r\n                }\r\n            });\r\n        });\r\n    }\r\n    Internal.createEditorWidget = createEditorWidget;\r\n})(Internal || (Internal = {}));\r\n\n\n/***/ }),\n\n/***/ \"../../packages/lib/src/products/Factory.ts\":\n/*!**************************************************!*\\\n  !*** ../../packages/lib/src/products/Factory.ts ***!\n  \\**************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __nested_webpack_require_55949__) {\n\n__nested_webpack_require_55949__.r(__webpack_exports__);\n/* harmony export */ __nested_webpack_require_55949__.d(__webpack_exports__, {\n/* harmony export */   \"ProductFromCache\": function() { return /* binding */ ProductFromCache; },\n/* harmony export */   \"ProductFromData\": function() { return /* binding */ ProductFromData; }\n/* harmony export */ });\n/* harmony import */ var _3DProduct__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_55949__(/*! ./_3DProduct */ \"../../packages/lib/src/products/_3DProduct.ts\");\n/* harmony import */ var _EyewearProduct__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_55949__(/*! ./_EyewearProduct */ \"../../packages/lib/src/products/_EyewearProduct.ts\");\nvar __spreadArrays = (undefined && undefined.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\n\r\nvar _productsCache = {};\r\nfunction ProductFromCache(workspaceKey, productKey) {\r\n    return _productsCache[workspaceKey + productKey];\r\n}\r\nvar _variationsCache = {};\r\nfunction VariationsFromCache(workspaceKey, productKey) {\r\n    return _variationsCache[workspaceKey + productKey];\r\n}\r\nfunction ProductFromData(data, props) {\r\n    var product = ProductFromCache(data.workspaceKey, data.productKey);\r\n    if (product !== undefined)\r\n        return product;\r\n    var variations = VariationsFromCache(data.workspaceKey, data.productKey);\r\n    if (variations === undefined) {\r\n        variations = [];\r\n        data.variations.forEach(function (variation) {\r\n            var vData = variation;\r\n            _variationsCache[vData.workspaceKey + vData.productKey] = variations;\r\n        });\r\n    }\r\n    if (props !== undefined) {\r\n        var missingProps = [];\r\n        var _loop_1 = function (key) {\r\n            var header = props[key];\r\n            if (header in data.properties) {\r\n                if (key in data.properties)\r\n                    console.warn(\"Custom property accessor '\" + key + \"' will override existing property.\");\r\n                Object.defineProperty(data.properties, key, {\r\n                    get: function () { return data.properties[header]; }\r\n                });\r\n            }\r\n            else {\r\n                missingProps.push(header);\r\n            }\r\n        };\r\n        for (var key in props) {\r\n            _loop_1(key);\r\n        }\r\n        if (missingProps.length > 0) {\r\n            var plr = missingProps.length > 1;\r\n            console.warn(\"Custom propert\" + (plr ? 'ies' : 'y') + \": '\" + missingProps.join(\"', '\") + \"' \" + (plr ? 'are' : 'is') + \" missing from '\" + data.productKey + \"'\");\r\n        }\r\n    }\r\n    var productArgs = [\r\n        data.workspaceKey,\r\n        data.productKey,\r\n        data.properties,\r\n        variations\r\n    ];\r\n    switch (data.productType) {\r\n        case '3D':\r\n            product = new (_3DProduct__WEBPACK_IMPORTED_MODULE_0__._3DProduct.bind.apply(_3DProduct__WEBPACK_IMPORTED_MODULE_0__._3DProduct, __spreadArrays([void 0], productArgs)))();\r\n            break;\r\n        case 'Eyewear':\r\n            product = new (_EyewearProduct__WEBPACK_IMPORTED_MODULE_1__._EyewearProduct.bind.apply(_EyewearProduct__WEBPACK_IMPORTED_MODULE_1__._EyewearProduct, __spreadArrays([void 0], productArgs)))();\r\n            break;\r\n        case 'Makeup':\r\n            throw 'Not implemented';\r\n        default:\r\n            throw 'Not implemented';\r\n    }\r\n    variations.push(product);\r\n    _productsCache[data.workspaceKey + data.productKey] = product;\r\n    return product;\r\n}\r\n\n\n/***/ }),\n\n/***/ \"../../packages/lib/src/products/_3DProduct.ts\":\n/*!*****************************************************!*\\\n  !*** ../../packages/lib/src/products/_3DProduct.ts ***!\n  \\*****************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __nested_webpack_require_59929__) {\n\n__nested_webpack_require_59929__.r(__webpack_exports__);\n/* harmony export */ __nested_webpack_require_59929__.d(__webpack_exports__, {\n/* harmony export */   \"_3DProduct\": function() { return /* binding */ _3DProduct; }\n/* harmony export */ });\n/* harmony import */ var _Product__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_59929__(/*! ./_Product */ \"../../packages/lib/src/products/_Product.ts\");\n/* harmony import */ var _widgets_3DWidget__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_59929__(/*! ../widgets/_3DWidget */ \"../../packages/lib/src/widgets/_3DWidget.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\n\r\n\r\nvar _3DProduct = /** @class */ (function (_super) {\r\n    __extends(_3DProduct, _super);\r\n    function _3DProduct() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._3D = true;\r\n        _this.is3D = function () { return true; };\r\n        return _this;\r\n    }\r\n    _3DProduct.prototype.create3DWidget = function (domElement) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var widget;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        widget = new _widgets_3DWidget__WEBPACK_IMPORTED_MODULE_1__._3DWidget(this, domElement);\r\n                        return [4 /*yield*/, widget.waitForInit];\r\n                    case 1: return [2 /*return*/, _a.sent()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return _3DProduct;\r\n}(_Product__WEBPACK_IMPORTED_MODULE_0__._Product));\r\n\r\n\n\n/***/ }),\n\n/***/ \"../../packages/lib/src/products/_EyewearProduct.ts\":\n/*!**********************************************************!*\\\n  !*** ../../packages/lib/src/products/_EyewearProduct.ts ***!\n  \\**********************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __nested_webpack_require_64944__) {\n\n__nested_webpack_require_64944__.r(__webpack_exports__);\n/* harmony export */ __nested_webpack_require_64944__.d(__webpack_exports__, {\n/* harmony export */   \"_EyewearProduct\": function() { return /* binding */ _EyewearProduct; }\n/* harmony export */ });\n/* harmony import */ var _3DProduct__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_64944__(/*! ./_3DProduct */ \"../../packages/lib/src/products/_3DProduct.ts\");\n/* harmony import */ var _widgets_3DWidget__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_64944__(/*! ../widgets/_3DWidget */ \"../../packages/lib/src/widgets/_3DWidget.ts\");\n/* harmony import */ var _widgets_EyewearWidget__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_64944__(/*! ../widgets/_EyewearWidget */ \"../../packages/lib/src/widgets/_EyewearWidget.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\n\r\n\r\n\r\nvar _EyewearProduct = /** @class */ (function (_super) {\r\n    __extends(_EyewearProduct, _super);\r\n    function _EyewearProduct() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._eyewear = true;\r\n        _this._3D = true;\r\n        _this.isEyewear = function () { return true; };\r\n        return _this;\r\n    }\r\n    _EyewearProduct.prototype.create3DWidget = function (domElement) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var widget;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        widget = new _widgets_3DWidget__WEBPACK_IMPORTED_MODULE_1__._3DWidget(this, domElement);\r\n                        return [4 /*yield*/, widget.waitForInit];\r\n                    case 1: return [2 /*return*/, _a.sent()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    _EyewearProduct.prototype.createEyewearWidget = function (domElement) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var widget;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        widget = new _widgets_EyewearWidget__WEBPACK_IMPORTED_MODULE_2__._EyewearWidget(this, domElement);\r\n                        return [4 /*yield*/, widget.waitForInit];\r\n                    case 1: return [2 /*return*/, _a.sent()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    _EyewearProduct.prototype.createMultiWidget = function (domElement) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                throw new Error('Method not implemented.');\r\n            });\r\n        });\r\n    };\r\n    return _EyewearProduct;\r\n}(_3DProduct__WEBPACK_IMPORTED_MODULE_0__._3DProduct));\r\n\r\n\n\n/***/ }),\n\n/***/ \"../../packages/lib/src/products/_Product.ts\":\n/*!***************************************************!*\\\n  !*** ../../packages/lib/src/products/_Product.ts ***!\n  \\***************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __nested_webpack_require_71085__) {\n\n__nested_webpack_require_71085__.r(__webpack_exports__);\n/* harmony export */ __nested_webpack_require_71085__.d(__webpack_exports__, {\n/* harmony export */   \"_Product\": function() { return /* binding */ _Product; }\n/* harmony export */ });\nvar _Product = /** @class */ (function () {\r\n    function _Product(workspaceKey, productKey, properties, variations) {\r\n        this.workspaceKey = workspaceKey;\r\n        this.productKey = productKey;\r\n        this.properties = properties;\r\n        this.is3D = function () { return false; };\r\n        this.isEyewear = function () { return false; };\r\n        this.isMakeup = function () { return false; };\r\n        this.variations = variations;\r\n    }\r\n    Object.defineProperty(_Product.prototype, \"thumbnailURL\", {\r\n        get: function () { return ''; },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    _Product.prototype.fetchRecommendations = function (num, external) {\r\n        var recommendations = new Array(num);\r\n        recommendations.map(function (_, i) {\r\n            return {\r\n                sku: i.toString(),\r\n                score: i / num\r\n            };\r\n        });\r\n        return new Promise(function (r) { return r(recommendations); });\r\n    };\r\n    return _Product;\r\n}());\r\n\r\n\n\n/***/ }),\n\n/***/ \"../../packages/lib/src/widgets/Messaging.ts\":\n/*!***************************************************!*\\\n  !*** ../../packages/lib/src/widgets/Messaging.ts ***!\n  \\***************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __nested_webpack_require_72647__) {\n\n__nested_webpack_require_72647__.r(__webpack_exports__);\n/* harmony export */ __nested_webpack_require_72647__.d(__webpack_exports__, {\n/* harmony export */   \"DESIGNHUBZ_API_TYPE\": function() { return /* binding */ DESIGNHUBZ_API_TYPE; }\n/* harmony export */ });\nvar DESIGNHUBZ_API_TYPE = 'designhubz-api';\r\n\n\n/***/ }),\n\n/***/ \"../../packages/lib/src/widgets/Snapshot.ts\":\n/*!**************************************************!*\\\n  !*** ../../packages/lib/src/widgets/Snapshot.ts ***!\n  \\**************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __nested_webpack_require_73248__) {\n\n__nested_webpack_require_73248__.r(__webpack_exports__);\n/* harmony export */ __nested_webpack_require_73248__.d(__webpack_exports__, {\n/* harmony export */   \"Snapshot\": function() { return /* binding */ Snapshot; }\n/* harmony export */ });\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar _canvas;\r\nfunction DrawToCanvas(source, flip) {\r\n    if (_canvas === undefined)\r\n        _canvas = document.createElement('canvas');\r\n    _canvas.width = source.width;\r\n    _canvas.height = source.height;\r\n    var context = _canvas.getContext('2d');\r\n    context.resetTransform();\r\n    if (flip) {\r\n        context.translate(0, _canvas.height);\r\n        context.scale(1, -1);\r\n    }\r\n    if (source instanceof ImageData)\r\n        context.putImageData(source, 0, 0);\r\n    else\r\n        context.drawImage(source, 0, 0, source.width, source.height);\r\n    return _canvas;\r\n}\r\nvar Snapshot = /** @class */ (function () {\r\n    function Snapshot(imageData) {\r\n        this.imageData = imageData;\r\n    }\r\n    Snapshot.prototype.getDataURL = function (type, quality) {\r\n        var canvas = DrawToCanvas(this.imageData, false);\r\n        return canvas.toDataURL(type === 'jpeg' ? 'image/jpeg' : 'image/png', quality);\r\n    };\r\n    Snapshot.prototype.getBlobAsync = function (type, quality) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var canvas, blob;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        canvas = DrawToCanvas(this.imageData, false);\r\n                        return [4 /*yield*/, new Promise(function (resolve, reject) {\r\n                                return canvas.toBlob(function (blob) {\r\n                                    if (blob === null)\r\n                                        reject('Failed to generate Blob');\r\n                                    else\r\n                                        resolve(blob);\r\n                                }, type === 'jpeg' ? 'image/jpeg' : 'image/png', quality);\r\n                            })];\r\n                    case 1:\r\n                        blob = _a.sent();\r\n                        return [2 /*return*/, blob];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return Snapshot;\r\n}());\r\n\r\n\n\n/***/ }),\n\n/***/ \"../../packages/lib/src/widgets/_3DWidget.ts\":\n/*!***************************************************!*\\\n  !*** ../../packages/lib/src/widgets/_3DWidget.ts ***!\n  \\***************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __nested_webpack_require_78314__) {\n\n__nested_webpack_require_78314__.r(__webpack_exports__);\n/* harmony export */ __nested_webpack_require_78314__.d(__webpack_exports__, {\n/* harmony export */   \"_3DWidget\": function() { return /* binding */ _3DWidget; }\n/* harmony export */ });\n/* harmony import */ var _Widget__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_78314__(/*! ./_Widget */ \"../../packages/lib/src/widgets/_Widget.ts\");\n/* harmony import */ var _designhubz_widget_data__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_78314__(/*! @designhubz-widget/data */ \"../../packages/data/src/index.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\n\r\nvar _3DWidget = /** @class */ (function (_super) {\r\n    __extends(_3DWidget, _super);\r\n    function _3DWidget(defaultVariation, domElement, src) {\r\n        var _this = _super.call(this, defaultVariation, domElement) || this;\r\n        _this._3D = true;\r\n        _this._iframe.src = src !== null && src !== void 0 ? src : _designhubz_widget_data__WEBPACK_IMPORTED_MODULE_1__.Data.apps.viewer + \"?workspaceId=\" + defaultVariation.workspaceKey + \"&referenceId=\" + defaultVariation.productKey;\r\n        _this.Attach();\r\n        return _this;\r\n    }\r\n    return _3DWidget;\r\n}(_Widget__WEBPACK_IMPORTED_MODULE_0__._Widget));\r\n\r\n\n\n/***/ }),\n\n/***/ \"../../packages/lib/src/widgets/_EyewearWidget.ts\":\n/*!********************************************************!*\\\n  !*** ../../packages/lib/src/widgets/_EyewearWidget.ts ***!\n  \\********************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __nested_webpack_require_80446__) {\n\n__nested_webpack_require_80446__.r(__webpack_exports__);\n/* harmony export */ __nested_webpack_require_80446__.d(__webpack_exports__, {\n/* harmony export */   \"_EyewearWidget\": function() { return /* binding */ _EyewearWidget; }\n/* harmony export */ });\n/* harmony import */ var _designhubz_widget_utils__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_80446__(/*! @designhubz-widget/utils */ \"../../packages/utils/src/index.ts\");\n/* harmony import */ var _Widget__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_80446__(/*! ./_Widget */ \"../../packages/lib/src/widgets/_Widget.ts\");\n/* harmony import */ var _designhubz_widget_data__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_80446__(/*! @designhubz-widget/data */ \"../../packages/data/src/index.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n\r\n\r\n\r\nvar _EyewearWidget = /** @class */ (function (_super) {\r\n    __extends(_EyewearWidget, _super);\r\n    function _EyewearWidget(defaultVariation, domElement) {\r\n        var _this = _super.call(this, defaultVariation, domElement) || this;\r\n        _this._eyewear = true;\r\n        _this.onTrackingStatusChange = new _designhubz_widget_utils__WEBPACK_IMPORTED_MODULE_0__.Signal();\r\n        _this._iframe.setAttribute('allow', 'camera;microphone');\r\n        _this._iframe.src = _designhubz_widget_data__WEBPACK_IMPORTED_MODULE_2__.Data.apps.viewer + \"?workspaceId=\" + defaultVariation.workspaceKey + \"&referenceId=\" + defaultVariation.productKey;\r\n        _this.Attach();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(_EyewearWidget.prototype, \"fit\", {\r\n        get: function () { return true; },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    return _EyewearWidget;\r\n}(_Widget__WEBPACK_IMPORTED_MODULE_1__._Widget));\r\n\r\n\n\n/***/ }),\n\n/***/ \"../../packages/lib/src/widgets/_Widget.ts\":\n/*!*************************************************!*\\\n  !*** ../../packages/lib/src/widgets/_Widget.ts ***!\n  \\*************************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __nested_webpack_require_83060__) {\n\n__nested_webpack_require_83060__.r(__webpack_exports__);\n/* harmony export */ __nested_webpack_require_83060__.d(__webpack_exports__, {\n/* harmony export */   \"_Widget\": function() { return /* binding */ _Widget; }\n/* harmony export */ });\n/* harmony import */ var _designhubz_widget_utils__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_83060__(/*! @designhubz-widget/utils */ \"../../packages/utils/src/index.ts\");\n/* harmony import */ var _Dev__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_83060__(/*! ../_Dev */ \"../../packages/lib/src/_Dev.ts\");\n/* harmony import */ var _Snapshot__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_83060__(/*! ./Snapshot */ \"../../packages/lib/src/widgets/Snapshot.ts\");\n/* harmony import */ var _Messaging__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_83060__(/*! ./Messaging */ \"../../packages/lib/src/widgets/Messaging.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\n\r\n\r\n\r\n\r\nvar _Widget = /** @class */ (function () {\r\n    function _Widget(defaultVariation, domElement) {\r\n        var _this = this;\r\n        this.domElement = domElement;\r\n        this.waitForInit = new Promise(function (resolve) { return _this._waitForInit = resolve; });\r\n        this._id = Math.floor(Math.random() * 1000) + '-';\r\n        this._queriesCount = 0;\r\n        this._pending = new Map();\r\n        onmessage = function (message) {\r\n            var _a;\r\n            if (((_a = message.data) === null || _a === void 0 ? void 0 : _a.type) === _Messaging__WEBPACK_IMPORTED_MODULE_3__.DESIGNHUBZ_API_TYPE)\r\n                _this.OnWidgetMessage(message.data);\r\n        };\r\n        this._variation = defaultVariation;\r\n        this._iframe = _designhubz_widget_utils__WEBPACK_IMPORTED_MODULE_0__.Dom.BuildHTML(\"<iframe\\n    style=\\\"width: 1px; min-width: 100%; *width: 100%; height: 1px; min-height: 100%; *height: 100%;\\\" \\n    width=\\\"100%\\\" height=\\\"100%\\\" scrolling=\\\"no\\\" frameBorder=\\\"0\\\"\\n</iframe>\");\r\n    }\r\n    Object.defineProperty(_Widget.prototype, \"variation\", {\r\n        get: function () { return this._variation; },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    _Widget.prototype.loadVariation = function (variation) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                if (this._variation.variations.every(function (v) { return v.productKey !== variation.productKey; }))\r\n                    throw new Error(\"Product '\" + variation.productKey + \"' is not a variation of \" + this._variation.variations.map(function (v) { return v.productKey; }).join(', '));\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    _Widget.prototype.takeSnapshotAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var query, imageData;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.QueryAsync({\r\n                            event: \"SnapshotRequest\" /* SnapshotRequest */,\r\n                            value: {\r\n                                flip: false\r\n                            }\r\n                        })];\r\n                    case 1:\r\n                        query = _a.sent();\r\n                        imageData = new ImageData(new Uint8ClampedArray(query.value.data.buffer), query.value.width, query.value.height);\r\n                        return [2 /*return*/, new _Snapshot__WEBPACK_IMPORTED_MODULE_2__.Snapshot(imageData)];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    _Widget.prototype.sendStat = function (stat) {\r\n        return Promise.resolve();\r\n    };\r\n    _Widget.prototype.disposeAsync = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                if (this._iframe.parentElement !== null)\r\n                    this._iframe.parentElement.removeChild(this._iframe);\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    _Widget.prototype.OnWidgetMessage = function (data) {\r\n        var resolver = this._pending.get(data.id);\r\n        if (resolver !== undefined) {\r\n            resolver(data);\r\n        }\r\n        else {\r\n            switch (data.event) {\r\n                case \"Init\" /* Init */:\r\n                    this._waitForInit(this);\r\n                    break;\r\n                default:\r\n                    _Dev__WEBPACK_IMPORTED_MODULE_1__._dev.Log(\"No listeners on '\" + event + \"'\", data.value);\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n    _Widget.prototype.QueryAsync = function (message, waitForReply) {\r\n        if (waitForReply === void 0) { waitForReply = true; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var promise;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                if (this._iframe.contentWindow === null)\r\n                    throw new Error(\"Can't query iframe's contentWindow.\");\r\n                if (('type' in message && 'id' in message) === false) {\r\n                    message = Object.assign({\r\n                        type: _Messaging__WEBPACK_IMPORTED_MODULE_3__.DESIGNHUBZ_API_TYPE,\r\n                        id: this._id + (this._queriesCount++)\r\n                    }, message);\r\n                }\r\n                promise = waitForReply\r\n                    ? new Promise(function (r) { return _this._pending.set(message.id, r); })\r\n                    : Promise.resolve(message);\r\n                this._iframe.contentWindow.postMessage(message, '*');\r\n                return [2 /*return*/, promise];\r\n            });\r\n        });\r\n    };\r\n    _Widget.prototype.Attach = function () {\r\n        // what kind of dom events do I need to handle?\r\n        this.domElement.appendChild(this._iframe);\r\n    };\r\n    return _Widget;\r\n}());\r\n\r\n\n\n/***/ }),\n\n/***/ \"../../packages/utils/src/Browser.ts\":\n/*!*******************************************!*\\\n  !*** ../../packages/utils/src/Browser.ts ***!\n  \\*******************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __nested_webpack_require_91715__) {\n\n__nested_webpack_require_91715__.r(__webpack_exports__);\n/* harmony export */ __nested_webpack_require_91715__.d(__webpack_exports__, {\n/* harmony export */   \"GetUrlParam\": function() { return /* binding */ GetUrlParam; },\n/* harmony export */   \"Dom\": function() { return /* binding */ Dom; }\n/* harmony export */ });\nfunction GetUrlParam(name, url) {\r\n    if (url === void 0) { url = location.href; }\r\n    name = name.replace(/[\\[]/, '\\\\\\[').replace(/[\\]]/, '\\\\\\]');\r\n    var results = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\").exec(url);\r\n    return results ? results[1] || '1' : undefined;\r\n}\r\nvar Dom;\r\n(function (Dom) {\r\n    function CreateStylesheet(css) {\r\n        var style = document.createElement('style');\r\n        style.type = 'text/css';\r\n        style.innerHTML = css;\r\n        document.getElementsByTagName('head')[0].appendChild(style);\r\n        return style;\r\n    }\r\n    Dom.CreateStylesheet = CreateStylesheet;\r\n    function BuildHTML(html) {\r\n        var div = document.createElement('div');\r\n        div.innerHTML = html.trim();\r\n        return div.firstChild;\r\n    }\r\n    Dom.BuildHTML = BuildHTML;\r\n})(Dom || (Dom = {}));\r\n\n\n/***/ }),\n\n/***/ \"../../packages/utils/src/Signals.ts\":\n/*!*******************************************!*\\\n  !*** ../../packages/utils/src/Signals.ts ***!\n  \\*******************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __nested_webpack_require_93126__) {\n\n__nested_webpack_require_93126__.r(__webpack_exports__);\n/* harmony export */ __nested_webpack_require_93126__.d(__webpack_exports__, {\n/* harmony export */   \"Signal\": function() { return /* binding */ Signal; }\n/* harmony export */ });\nvar Signal = /** @class */ (function () {\r\n    function Signal() {\r\n        this.callbacks = [];\r\n    }\r\n    Signal.prototype.Add = function (callback) {\r\n        if (typeof callback !== 'function') {\r\n            console.warn('Not a function', callback);\r\n            throw (\"'callback' should be a function.\");\r\n        }\r\n        this.callbacks.push(callback);\r\n    };\r\n    Signal.prototype.Remove = function (callback) {\r\n        var index = this.callbacks.indexOf(callback);\r\n        if (index !== -1)\r\n            this.callbacks.splice(index, 1);\r\n    };\r\n    Signal.prototype.Dispatch = function (arg) {\r\n        for (var i = 0; i < this.callbacks.length; i++)\r\n            this.callbacks[i](arg);\r\n    };\r\n    Signal.prototype.Once = function (callback) {\r\n        var _this = this;\r\n        var once = function (arg) {\r\n            _this.Remove(once);\r\n            callback(arg);\r\n        };\r\n        this.Add(once);\r\n    };\r\n    return Signal;\r\n}());\r\n\r\n// Example\r\nvar Keyboard = /** @class */ (function () {\r\n    function Keyboard() {\r\n        this._onInput = new Signal();\r\n    }\r\n    Object.defineProperty(Keyboard.prototype, \"Input\", {\r\n        get: function () { return this._onInput; },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Keyboard.prototype.Enter = function (text) {\r\n        this._onInput.Dispatch(text);\r\n    };\r\n    Keyboard.Example = function () {\r\n        var keyboard = new Keyboard();\r\n        keyboard.Input.Add(function (key) { return console.log(\"keyboard.Input -> \" + key); });\r\n        keyboard.Enter('x');\r\n    };\r\n    return Keyboard;\r\n}());\r\n\n\n/***/ }),\n\n/***/ \"../../packages/utils/src/index.ts\":\n/*!*****************************************!*\\\n  !*** ../../packages/utils/src/index.ts ***!\n  \\*****************************************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __nested_webpack_require_95229__) {\n\n__nested_webpack_require_95229__.r(__webpack_exports__);\n/* harmony export */ __nested_webpack_require_95229__.d(__webpack_exports__, {\n/* harmony export */   \"Dom\": function() { return /* reexport safe */ _Browser__WEBPACK_IMPORTED_MODULE_0__.Dom; },\n/* harmony export */   \"GetUrlParam\": function() { return /* reexport safe */ _Browser__WEBPACK_IMPORTED_MODULE_0__.GetUrlParam; },\n/* harmony export */   \"Signal\": function() { return /* reexport safe */ _Signals__WEBPACK_IMPORTED_MODULE_1__.Signal; }\n/* harmony export */ });\n/* harmony import */ var _Browser__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_95229__(/*! ./Browser */ \"../../packages/utils/src/Browser.ts\");\n/* harmony import */ var _Signals__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_95229__(/*! ./Signals */ \"../../packages/utils/src/Signals.ts\");\nconsole.log('@designhubz-widget/utils');\r\n\r\n\r\n\n\n/***/ }),\n\n/***/ \"./src/index.ts\":\n/*!**********************!*\\\n  !*** ./src/index.ts ***!\n  \\**********************/\n/***/ (function(__unused_webpack_module, __webpack_exports__, __nested_webpack_require_96269__) {\n\n__nested_webpack_require_96269__.r(__webpack_exports__);\n/* harmony export */ __nested_webpack_require_96269__.d(__webpack_exports__, {\n/* harmony export */   \"Internal\": function() { return /* reexport safe */ _designhubz_widget_lib__WEBPACK_IMPORTED_MODULE_0__.Internal; },\n/* harmony export */   \"dev\": function() { return /* reexport safe */ _designhubz_widget_lib__WEBPACK_IMPORTED_MODULE_0__.dev; },\n/* harmony export */   \"fetchProduct\": function() { return /* reexport safe */ _designhubz_widget_lib__WEBPACK_IMPORTED_MODULE_0__.fetchProduct; },\n/* harmony export */   \"fetchProducts\": function() { return /* reexport safe */ _designhubz_widget_lib__WEBPACK_IMPORTED_MODULE_0__.fetchProducts; },\n/* harmony export */   \"version\": function() { return /* reexport safe */ _designhubz_widget_lib__WEBPACK_IMPORTED_MODULE_0__.version; }\n/* harmony export */ });\n/* harmony import */ var _designhubz_widget_lib__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_96269__(/*! @designhubz-widget/lib */ \"../../packages/lib/src/index.ts\");\n\r\n\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __nested_webpack_require_97531__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(__webpack_module_cache__[moduleId]) {\n/******/ \t\t\treturn __webpack_module_cache__[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __nested_webpack_require_97531__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/define property getters */\n/******/ \t!function() {\n/******/ \t\t// define getter functions for harmony exports\n/******/ \t\t__nested_webpack_require_97531__.d = function(exports, definition) {\n/******/ \t\t\tfor(var key in definition) {\n/******/ \t\t\t\tif(__nested_webpack_require_97531__.o(definition, key) && !__nested_webpack_require_97531__.o(exports, key)) {\n/******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t}();\n/******/ \t\n/******/ \t/* webpack/runtime/hasOwnProperty shorthand */\n/******/ \t!function() {\n/******/ \t\t__nested_webpack_require_97531__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }\n/******/ \t}();\n/******/ \t\n/******/ \t/* webpack/runtime/make namespace object */\n/******/ \t!function() {\n/******/ \t\t// define __esModule on exports\n/******/ \t\t__nested_webpack_require_97531__.r = function(exports) {\n/******/ \t\t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t\t}\n/******/ \t\t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t\t};\n/******/ \t}();\n/******/ \t\n/************************************************************************/\n/******/ \t// module exports must be returned from runtime so entry inlining is disabled\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \treturn __nested_webpack_require_97531__(\"./src/index.ts\");\n/******/ })()\n;\n});\n//# sourceMappingURL=index.js.map\n\n//# sourceURL=webpack://@designhubz-widget/example/./designhubz-widget/dist/index.js?");

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var designhubz_widget__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! designhubz-widget */ \"./designhubz-widget/dist/index.js\");\n/* harmony import */ var designhubz_widget__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(designhubz_widget__WEBPACK_IMPORTED_MODULE_0__);\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n(() => __awaiter(void 0, void 0, void 0, function* () {\r\n    const CustomProps = { sizeCode: 'Size Code', missing: 'Wrong Code' };\r\n    console.log('1) CustomProps:', CustomProps);\r\n    const product = yield designhubz_widget__WEBPACK_IMPORTED_MODULE_0__.fetchProduct('eyewear', // Workspace key (project key, provided by CMS)\r\n    ['728506', '732058', '743263'][0], // Variation key\r\n    CustomProps // Optional check & typing for integrated variation properties\r\n    );\r\n    console.log('2) product:', product);\r\n    console.log('   sizeCode:', product.properties.sizeCode);\r\n    console.log('   missing:', product.properties.missing);\r\n    // 'Color Code' was not mapped in CustomProps (it retains the default accessor = csv header)\r\n    console.log('   Color Code:', product.properties['Color Code']);\r\n    if (product.isEyewear()) {\r\n        const container = document.getElementById('designhubz-widget-container');\r\n        const widget = yield product.createEyewearWidget(container);\r\n        console.log('3) widget:', widget);\r\n        console.log('   click outside of widget to take snapshot...');\r\n        document.addEventListener('click', (ev) => __awaiter(void 0, void 0, void 0, function* () {\r\n            const snapshot = yield widget.takeSnapshotAsync();\r\n            console.log('Snaphot:', snapshot);\r\n            // save or open\r\n            const blob = yield snapshot.getBlobAsync('png');\r\n            open(URL.createObjectURL(blob), '_blank');\r\n        }));\r\n    }\r\n}))();\r\n\n\n//# sourceURL=webpack://@designhubz-widget/example/./src/index.ts?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		if(__webpack_module_cache__[moduleId]) {
/******/ 			return __webpack_module_cache__[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	// startup
/******/ 	// Load entry module
/******/ 	__webpack_require__("./src/index.ts");
/******/ 	// This entry module used 'exports' so it can't be inlined
/******/ })()
;